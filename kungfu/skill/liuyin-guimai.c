#include <ansi.h>
inherit FORCE;

mapping *action = ({
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N双手拇指同时捺出，嗤嗤两声急响，「" HIW "六阴鬼脉・少商剑" NOR "」有如石破天惊、风雨大至",
        "force" : 560,
        "attack": 240,
        "dodge" : 190,
        "parry" : 190,
        "damage": 560,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N大拇指一按，嗤嗤两指，劲道使得甚巧，「" HIW "六阴鬼脉・少商剑" NOR "」剑气如怒潮般涌至",
        "force" : 560,
        "attack": 240,
        "dodge" : 190,
        "parry" : 190,
        "damage": 560,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N大拇指连挥，「" HIW "六阴鬼脉・少商剑" NOR "」便如是一幅泼墨山水，纵横倚斜，剑路雄劲",
        "force" : 560,
        "attack": 240,
        "dodge" : 190,
        "parry" : 190,
        "damage": 560,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N双手拇指同时捺出，「" HIW "六阴鬼脉・少商剑" NOR "」大开大阖，气派宏伟，每一剑都有风雨大至之势",
        "force" : 560,
        "attack": 240,
        "dodge" : 190,
        "parry" : 190,
        "damage": 560,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N食指连动，手腕园转，「" HIW "六阴鬼脉・商阳剑" NOR "」一剑又一剑的刺出，轻灵迅速，剑气纵横",
        "force" : 540,
        "attack": 245,
        "dodge" : 110,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N变招奇速，右手食指疾从袖底穿出，「" HIW "六阴鬼脉・商阳剑" NOR "」登时幻出无数指影",
        "force" : 540,
        "attack": 245,
        "dodge" : 110,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N拇指一屈，食指随即点出，嗤嗤两声急响，变成商阳剑法，「" HIW "六阴鬼脉・商阳剑" NOR "」激射刺出",
        "force" : 540,
        "attack": 245,
        "dodge" : 110,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N以食指急运「" HIW "六阴鬼脉・商阳剑" NOR "」之无形剑气，却不过是手指在数寸范围内一点一戳",
        "force" : 580,
        "attack": 245,
        "dodge" : 110,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・中冲剑",
        "action": "$N右手中指一竖，「" HIW "六阴鬼脉・中冲剑" NOR "」向前刺出。真气鼓荡，嗤然声响，无形剑气直指$n",
        "force" : 560,
        "attack": 255,
        "dodge" : 110,
        "parry" : 170,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・中冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・中冲剑",
        "action": "$N将中指向上一刺，「" HIW "六阴鬼脉・中冲剑" NOR "」拔地而起，接着手指向下一划，剑气如利刀般砍出",
        "force" : 560,
        "attack": 245,
        "dodge" : 110,
        "parry" : 170,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・中冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・中冲剑",
        "action": "电光火石之间，$N猛然翻掌，右手陡然探出，中指「" HIW "六阴鬼脉・中冲剑" NOR"」向$n一竖",
        "force" : 560,
        "attack": 235,
        "dodge" : 110,
        "parry" : 170,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・中冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・关冲剑",
        "action": "$N右手无名指伸出，「" HIW "六阴鬼脉・关冲剑" NOR "」剑路拙滞古朴，一股雄浑无比的内力鼓荡而出",
        "force" : 530,
        "attack": 240,
        "dodge" : 100,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・关冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・关冲剑",
        "action": "$N俯身斜倚，无名指「" HIW "六阴鬼脉・关冲剑" NOR "」弹射而出，指尖已对准$n发出了一缕强烈的劲风",
        "force" : 530,
        "attack": 240,
        "dodge" : 100,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・关冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・关冲剑",
        "action": "$N无名指轻轻一挥，「嗤啦」一声，拙滞古朴的「" HIW "六阴鬼脉・关冲剑" NOR "」剑气向$n直射而出",
        "force" : 530,
        "attack": 240,
        "dodge" : 100,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・关冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少泽剑",
        "action": "$N左手小指一伸，一条气流从少冲穴中激射而出，「" HIW "六阴鬼脉・少泽剑" NOR "」出手入风，指向$n",
        "force" : 500,
        "attack": 260,
        "dodge" : 195,
        "parry" : 192,
        "damage": 570,
        "weapon" : HIW "六阴鬼脉・少泽剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少泽剑",
        "action": "忽见$N左手小指一伸，一条气流从$P少冲穴中激射而出，一股「" HIW "六阴鬼脉・少泽剑" NOR "」登时射向$n",
        "force" : 500,
        "attack": 260,
        "dodge" : 195,
        "parry" : 192,
        "damage": 570,
        "weapon" : HIW "六阴鬼脉・少泽剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N右手小指伸出，真气自少冲穴激荡而出，「" HIW "六阴鬼脉・少冲剑" NOR "」横生奇变，飕的刺向$n",
        "force" : 580,
        "attack": 250,
        "dodge" : 190,
        "parry" : 195,
        "damage": 540,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N掌托于胸前，伸出右小指，一招「" HIW "六阴鬼脉・少冲剑" NOR "」缓缓地点向$n的周身大穴",
        "force" : 530,
        "attack": 270,
        "dodge" : 190,
        "parry" : 195,
        "damage": 560,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N小指一弹，「" HIW "六阴鬼脉・少冲剑" NOR "」化式「六阴鬼脉・分花拂柳」，剑势如同柳絮一般，飘而不乱",
        "force" : 530,
        "attack": 280,
        "dodge" : 190,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N一招「" HIW "六阴鬼脉・少冲剑" NOR "」，剑气回转无定形，竟从左侧绕了过来，点向$n",
        "force" : 530,
        "attack": 280,
        "dodge" : 190,
        "parry" : 195,
        "damage": 540,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N右手小指一挥，一招「" HIW "六阴鬼脉・少冲剑" NOR "」点点刺刺破空刺出，宛如雕花刺画一般",
        "force" : 530,
        "attack": 280,
        "dodge" : 190,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
});

mapping *action2 = ({
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N双手拇指同时捺出，嗤嗤两声急响，「" HIW "六阴鬼脉・少商剑" NOR "」有如石破天惊、风雨大至",
        "force" : 480,
        "attack": 180,
        "dodge" : 120,
        "parry" : 120,
        "damage": 480,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N大拇指一按，嗤嗤两指，劲道使得甚巧，「" HIW "六阴鬼脉・少商剑" NOR "」剑气如怒潮般涌至",
        "force" : 480,
        "attack": 180,
        "dodge" : 120,
        "parry" : 130,
        "damage": 480,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N大拇指连挥，「" HIW "六阴鬼脉・少商剑" NOR "」便如是一幅泼墨山水，纵横倚斜，剑路雄劲",
        "force" : 500,
        "attack": 170,
        "dodge" : 150,
        "parry" : 150,
        "damage": 490,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少商剑",
        "action": "$N双手拇指同时捺出，「" HIW "六阴鬼脉・少商剑" NOR "」大开大阖，气派宏伟，每一剑都有风雨大至之势",
        "force" : 490,
        "attack": 200,
        "dodge" : 160,
        "parry" : 160,
        "damage": 460,
        "weapon" : HIW "六阴鬼脉・少商剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N食指连动，手腕园转，「" HIW "六阴鬼脉・商阳剑" NOR "」一剑又一剑的刺出，轻灵迅速，剑气纵横",
        "force" : 500,
        "attack": 215,
        "dodge" : 150,
        "parry" : 175,
        "damage": 500,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N变招奇速，右手食指疾从袖底穿出，「" HIW "六阴鬼脉・商阳剑" NOR "」登时幻出无数指影",
        "force" : 480,
        "attack": 145,
        "dodge" : 110,
        "parry" : 125,
        "damage": 480,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N拇指一屈，食指随即点出，嗤嗤两声急响，变成商阳剑法，「" HIW "六阴鬼脉・商阳剑" NOR "」激射刺出",
        "force" : 440,
        "attack": 145,
        "dodge" : 110,
        "parry" : 115,
        "damage": 480,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・商阳剑",
        "action": "$N以食指急运「" HIW "六阴鬼脉・商阳剑" NOR "」之无形剑气，却不过是手指在数寸范围内一点一戳",
        "force" : 480,
        "attack": 125,
        "dodge" : 100,
        "parry" : 165,
        "damage": 480,
        "weapon" : HIW "六阴鬼脉・商阳剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・中冲剑",
        "action": "$N右手中指一竖，「" HIW "六阴鬼脉・中冲剑" NOR "」向前刺出。真气鼓荡，嗤然声响，无形剑气直指$n",
        "force" : 460,
        "attack": 155,
        "dodge" : 80,
        "parry" : 70,
        "damage": 420,
        "weapon" : HIW "六阴鬼脉・中冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・中冲剑",
        "action": "$N将中指向上一刺，「" HIW "六阴鬼脉・中冲剑" NOR "」拔地而起，接着手指向下一划，剑气如利刀般砍出",
        "force" : 460,
        "attack": 145,
        "dodge" : 90,
        "parry" : 70,
        "damage": 440,
        "weapon" : HIW "六阴鬼脉・中冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・中冲剑",
        "action": "电光火石之间，$N猛然翻掌，右手陡然探出，中指「" HIW "六阴鬼脉・中冲剑" NOR"」向$n一竖",
        "force" : 460,
        "attack": 135,
        "dodge" : 100,
        "parry" : 70,
        "damage": 420,
        "weapon" : HIW "六阴鬼脉・中冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・关冲剑",
        "action": "$N右手无名指伸出，「" HIW "六阴鬼脉・关冲剑" NOR "」剑路拙滞古朴，一股雄浑无比的内力鼓荡而出",
        "force" : 530,
        "attack": 140,
        "dodge" : 100,
        "parry" : 195,
        "damage": 480,
        "weapon" : HIW "六阴鬼脉・关冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・关冲剑",
        "action": "$N俯身斜倚，无名指「" HIW "六阴鬼脉・关冲剑" NOR "」弹射而出，指尖已对准$n发出了一缕强烈的劲风",
        "force" : 500,
        "attack": 140,
        "dodge" : 100,
        "parry" : 195,
        "damage": 500,
        "weapon" : HIW "六阴鬼脉・关冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・关冲剑",
        "action": "$N无名指轻轻一挥，「嗤啦」一声，拙滞古朴的「" HIW "六阴鬼脉・关冲剑" NOR "」剑气向$n直射而出",
        "force" : 530,
        "attack": 140,
        "dodge" : 100,
        "parry" : 95,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・关冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少泽剑",
        "action": "$N左手小指一伸，一条气流从少冲穴中激射而出，「" HIW "六阴鬼脉・少泽剑" NOR"」出手入风，指向$n",
        "force" : 500,
        "attack": 160,
        "dodge" : 195,
        "parry" : 192,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・少泽剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少泽剑",
        "action": "忽见$N左手小指一伸，一条气流从$P少冲穴中激射而出，一股「" HIW "六阴鬼脉・少泽剑" NOR "」登时射向$n",
        "force" : 500,
        "attack": 160,
        "dodge" : 195,
        "parry" : 192,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・少泽剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N右手小指伸出，真气自少冲穴激荡而出，「" HIW "六阴鬼脉・少冲剑" NOR "」横生奇变，飕的刺向$n",
        "force" : 520,
        "attack": 150,
        "dodge" : 190,
        "parry" : 195,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N掌托于胸前，伸出右小指，一招「" HIW "六阴鬼脉・少冲剑" NOR "」缓缓地点向$n的周身大穴",
        "force" : 520,
        "attack": 170,
        "dodge" : 190,
        "parry" : 195,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N小指一弹，「" HIW "六阴鬼脉・少冲剑" NOR "」化式「六阴鬼脉・分花拂柳」，剑势如同柳絮一般，飘而不乱",
        "force" : 520,
        "attack": 280,
        "dodge" : 190,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N一招「" HIW "六阴鬼脉・少冲剑" NOR "」，剑气回转无定形，竟从左侧绕了过来，点向$n",
        "force" : 520,
        "attack": 180,
        "dodge" : 190,
        "parry" : 195,
        "damage": 520,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
([      "name":   "六阴鬼脉・少冲剑",
        "action": "$N右手小指一挥，一招「" HIW "六阴鬼脉・少冲剑" NOR "」点点刺刺破空刺出，宛如雕花刺画一般",
        "force" : 520,
        "attack": 180,
        "dodge" : 190,
        "parry" : 195,
        "damage": 580,
        "weapon" : HIW "六阴鬼脉・少冲剑气" NOR,
        "damage_type":  "刺伤"
]),
});

int query_neili_improve(object me)
{
        int lvl;

        lvl = (int)me->query_skill("liuyin-guimai", 1);

        // 会六阴鬼脉
        if( me->query("special_skill/guimai") && me->query("scborn/ok") )
                return lvl * lvl * 15 * 25 / 100 / 200;

        return lvl * lvl * 15 * 18 / 100 / 200;
}

int valid_enable(string usage)
{
        return usage == "finger" || usage == "parry" || usage == "force" || usage == "unarmed" ;
}

int double_attack()
{
        return 1;
}

int valid_learn(object me)
{
        if( me->query_temp("weapon") || me->query_temp("secondary_weapon") )
                return notify_fail("练六阴鬼脉必须空手。\n");

        if( me->query("int")<36 )
                return notify_fail("你研究了半天，只感自己仍许多不明白之处，无法再作研究。\n");

        if( me->query("con")<36 )
                return notify_fail("你研究了一会儿，只觉得眼前金星乱冒，太阳穴突突的跳。\n");

        if( me->query("str")<34 )
                return notify_fail("你只觉得自己先天臂力不足，无法继续修炼。\n");

        if( me->query("dex")<34 )
                return notify_fail("你只觉得自己身法不够灵巧，无法继续修炼。\n");

        if (me->query_skill("literate", 1) < 200)
                return notify_fail("你觉得六阴鬼脉极其深奥，不是你这种学问水平所能研究的。\n");

        if (me->query_skill("lamaism", 1) < 200)
                return notify_fail("你发现这里面有很多奥妙都和密宗心法有关，难以理解。\n");

        if (me->query_skill("buddhism", 1) < 200)
                return notify_fail("你发现这里面有很多奥妙都和禅宗心法有关，难以理解。\n");

        if (me->query_skill("jingluo-xue", 1) < 200)
                return notify_fail("你发现这里面有很多奥妙都和人体的经络构造有关，难以理解。\n");

        if( me->query("max_neili")<6000 )
                return notify_fail("你的内力太弱，无法学六阴鬼脉。\n");

        if ((int)me->query_skill("finger", 1) < 200)
                return notify_fail("你的基本指法火候不够。\n");

        if ((int)me->query_skill("force", 1) < (int)me->query_skill("liuyin-guimai", 1) + 10)
                return notify_fail("你的现在必须先提高你基本内功的水平。\n");

        if ((int)me->query_skill("finger", 1) < (int)me->query_skill("liuyin-guimai", 1) + 10)
                return notify_fail("你的现在必须先提高你基本指法的水平。\n");

        return 1;
}

string query_skill_name(int level)
{
        int i;
        for(i = sizeof(action); i > 0; i--)
                if(level >= action[i-1]["lvl"])
                        return action[i-1]["skill_name"];
}

int practice_skill(object me)
{
        return notify_fail("六阴鬼脉只能通过研究来提高熟练度。\n");
}

mixed hit_ob(object me, object victim, int damage_bonus, int factor)
{
        int i,attack_time;
        if (userp(me))
                attack_time = (int)(me->query_skill("liuyin-guimai", 1) / 50);
        else
                attack_time = (int)(me->query_skill("liuyin-guimai", 1) / 25);

        // 放宽NPC的攻击力度
        if (userp(me) && attack_time > 6)
                attack_time = 6;

        if (! me->is_busy()
           && living(victim)
           && damage_bonus > 120
            && me->query("neili")>400
            //&& me->query_temp("action_flag") != 0
          // && me->query_skill("martial-cognize", 1) >= 220
           && me->query_skill("liuyin-guimai", 1) >= 280
          /* && me->query_skill("jingluo-xue", 1) >= 200*/)
        {
                if (userp(me) && random(3) != 1)
                                return 0;

                // 避免在使用Pfm时讯息重复
                if( userp(me) && !me->query_temp("liuyin-guimai/hit_msg") )
                        message_vision(HIW "\n霎时间$N" HIW "只觉思绪狂涌，六阴鬼脉之神力蓄势待发，登"
                                     "时十指纷弹，此去彼来，连绵无尽。\n" NOR, me, victim);

                if (userp(me))
                        me->start_busy(2 + random(attack_time));
                    else
                        me->start_busy(1);

                       me->add("neili", -attack_time*50);

                for (i = 0; i < attack_time; i++)
                {
                        if (! me->is_fighting(victim))
                                break;
                        COMBAT_D->do_attack(me, victim, 0, 0);
                }
        }

           if (random( me->query_skill("unarmed") ) > random( victim->query_skill("force"))
               && damage_bonus > 150
            && me->query("neili")>200
         //  && me->query_skill("martial-cognize", 1) >= 220
           && me->query_skill("liuyin-guimai", 1) >= 280
         /*  && me->query_skill("jingluo-xue", 1) >= 200*/)
        {
                me->add("neili", -50);

                if( me->query("special_skill/guimai") )
                        victim->receive_wound("qi", damage_bonus, me);

                else
                        victim->receive_wound("qi", (damage_bonus - 80) / 2, me);

                return random(2) ? HIR "你听到「嗤啦」一声轻响，脸上竟飞溅到了一些血滴"
                                   "！\n" NOR:

                                   HIR "你只听「噗嗤」一声轻响，一股血柱至$n" HIR "身上"
                                   "溅出！\n" NOR;
        }
        return 1;
}

mapping query_action(object me, object weapon)
{
        if( !undefinedp(me->query_temp("six-action")) )
                return action[me->query_temp("six-action")];

        if( random(15) == 1 && me->query("neili")>600 )
        {
                me->add("neili", -300);
                return ([       "action": "$N纵身前扑，双手拇指同时按出一记「" HIR "六阴鬼脉・少商剑" NOR
                                          "」，两道无形剑气破空而出逼向$n",
                                        "attack": 300,
                                "dodge" : 200,
                                "parry" : 200,
                                "damage": 300,
                                "force" : 600,
                                "weapon" : HIR "六阴鬼脉・无形剑气" NOR,
                                "damage_type": "刺伤"
                        ]);
        } else
        if( random(15) == 1 && me->query("neili")>600 )
        {
                me->add("neili", -300);
                return ([       "action": "$N双手手指急速弹动，顿时「" HIR "六阴鬼脉・商阳剑" NOR "」和「"
                                          HIR "六阴鬼脉・中冲剑" NOR "」两路剑法齐施，剑气源源不断涌向$n",
                                        "attack": 300,
                                "dodge" : 200,
                                "parry" : 200,
                                "damage": 300,
                                "force" : 600,
                                "weapon" : HIR "六阴鬼脉・无形剑气" NOR,
                                "damage_type": "刺伤"
                        ]);
        } else
        if( random(15) == 1 && me->query("neili")>1000 )
        {
                me->add("neili", -300);
                return ([       "action": "$N内息急转，不断催动真气，「" HIR "六阴鬼脉" NOR "」"
                                          "奥妙无方，剑气破空之声骤响，尽数袭向$n",
                                        "attack": 300,
                                "dodge" : 200,
                                "parry" : 200,
                                "damage": 300,
                                "force" : 600,
                                "weapon" : HIR "六阴鬼脉・无形剑气" NOR,
                                "damage_type": "刺伤"
                        ]);
        }
        if( me->query("special_skill/guimai") )
                return action[random(sizeof(action))];

        else
                return action2[random(sizeof(action))];
}

string query_parry_msg(object victim_weapon)
{
        switch (random(4))
        {
        case 0:
                return "$n随意挥洒，道道六阴鬼脉剑气纵横交错，宛若天网，$N唯有望洋兴叹，徒呼奈何。\n";
        case 1:
                return "$n不闪不避，一招六阴鬼脉・中冲剑直袭$N的胸前大穴，迫得$N只有回身自救。\n";
        case 2:
                return "$n六剑连出，六阴鬼脉剑气回荡，直割得$N眉毛削落，脸面生通，再也不能前进半分！\n";
        default:
                return "$n一声长笑，六阴鬼脉・无形剑气四处散开，将$N层层裹住，惟有勉强支撑。才约略摆脱了$n的反击。\n";
        }
}

int difficult_level()
{
        return 8000;
}

string perform_action_file(string action)
{
        return __DIR__"liuyin-guimai/perform/" + action; 
}

string exert_function_file(string action)
{
        return __DIR__"liuyin-guimai/exert/" + action;
}